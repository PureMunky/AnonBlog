!function(){function t(t){t.when("/",{template:"<div ab-front></div>"}).when("/write",{template:"<div ab-write></div>"}).otherwise({redirectTo:"/"})}angular.module("app",["ngRoute"]).config(t),t.$inject=["$routeProvider"]}(),function(){"use strict";function t(){function t(t,e){function n(e){t.messages.push(e)}function o(){e.sendMessage(t.post._id,t.form.message),t.form.message=""}t.messages=[],t.form={message:""},t.sendMessage=o,e.onMessage(t.post._id,n)}var e={restrict:"A",templateUrl:"partials/directives/chat.html",scope:{post:"="},controller:t};return t.$inject=["$scope","Chat"],e}angular.module("app").directive("abChat",t)}(),function(){"use strict";function t(t){function e(t,e){c[t]||(c[t]=[]),c[t].push(e),r(t)}function n(t,e){var n=0;if(c[t])for(n=0;n<c[t].length;n++)c[t][n](e)}function o(e,n){t.Write({Body:n,Parent:e})}function r(e){a[e]=[],setInterval(function(){t.GetComments(e).then(function(t){return i(e,t.data)}).then(function(t){var o=0;for(o=0;o<t.length;o++)!function(o){n(e,t[o])}(o)})},5e3)}function i(t,e){var n=0,o=0,r=!1,i=[];for(n=0;n<e.length;n++){for(r=!1,o=0;o<a[t].length;o++)a[t][o]._id===e[n]._id&&(r=!0);r||(i.push(e[n]),a[t].push(e[n]))}return i}var s={onMessage:e,sendMessage:o},c=[],a=[];return s}angular.module("app").service("Chat",t),t.$inject=["Posts"]}(),function(){"use strict";function t(){function t(t,e){t.form={display:!1,body:""},t.comment=function(){t.form.display=!0},t.save=function(){e.Write({Body:t.form.body,Parent:t.parent})}}var e={restrict:"A",templateUrl:"partials/directives/comment.html",scope:{parent:"="},controller:t};return t.$inject=["$scope","Posts"],e}angular.module("app").directive("abComment",t)}(),function(){"use strict";function t(){function t(t){var e=this;t.GetAll().then(function(t){e.posts=t.data})}var e={restrict:"A",scope:{},templateUrl:"partials/directives/front.html",controllerAs:"vm",bindToController:!0,controller:t};return t.$inject=["Posts"],e}angular.module("app").directive("abFront",t)}(),function(){"use strict";function t(){return function(t){var e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return t?t.replace(e,"<a href='$1' target='_blank'>$1</a>"):""}}angular.module("app").filter("linkify",t)}(),function(){"use strict";function t(){function t(t,e){}var e={restrict:"A",templateUrl:"partials/directives/postComments.html",scope:{comments:"="},controller:t};return t.$inject=["$scope","Posts"],e}angular.module("app").directive("abPostComments",t)}(),function(){"use strict";function t(t){function e(){return t.get("/post")}function n(e){return t.get("/post/"+e)}function o(e){return t.get("/post/"+e+"/comments")}function r(e){return t.post("/post",e)}function i(e){return t.post("/post/"+e+"/promote")}var s={Promote:i,GetAll:e,Get:n,GetComments:o,Write:r};return s}angular.module("app").service("Posts",t),t.$inject=["$http"]}(),function(){"use strict";function t(){function t(t,e){function n(){e.Promote(t.post._id).then(function(t){console.log(t)})}t.promoted=!1,t.promote=n}var e={restrict:"A",templateUrl:"partials/directives/promote.html",scope:{post:"="},controller:t};return t.$inject=["$scope","Posts"],e}angular.module("app").directive("abPromote",t)}(),function(){"use strict";function t(){return function(t){return t.replace("\n","<br/>")}}angular.module("app").filter("textBody",t)}(),function(){function t(t){var e=this;e.form={comments:[]}}angular.module("app").controller("View",t),t.$inject=["Posts"]}(),function(){"use strict";function t(){function t(t,e){var n=this;n.form={comments:[]},n.Load=function(){t.GetComments(n.post._id).then(function(t){n.form.comments=t.data})}}var e={restrict:"A",scope:{post:"="},templateUrl:"partials/view.html",controllerAs:"vm",bindToController:!0,controller:t};return t.$inject=["Posts","$scope"],e}angular.module("app").directive("abPostView",t)}(),function(){"use strict";function t(){function t(t){var e=this;e.post={Title:"",Body:""},e.write=function(){t.Write(e.post).then(function(t){})}}var e={restrict:"A",scope:{},templateUrl:"partials/directives/write.html",controllerAs:"vm",bindToController:!0,controller:t};return t.$inject=["Posts"],e}angular.module("app").directive("abWrite",t)}();